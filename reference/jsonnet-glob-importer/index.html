<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.54.0" />
    <meta name="description" content="a tool to configure and create Kubernetes objects on multiple environments">


    <link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon" />
<link rel="icon" href="/images/favicon.png" type="image/x-icon" />
    <title>Jsonnet glob importer :: Qbec</title>

    
    <link href="/css/nucleus.css" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css" rel="stylesheet">
    <link href="/css/hybrid.css" rel="stylesheet">
    <link href="/css/featherlight.min.css" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css" rel="stylesheet">
    <link href="/css/auto-complete.css" rel="stylesheet">
    <link href="/css/theme.css" rel="stylesheet">
    <link href="/css/hugo-theme.css" rel="stylesheet">
    
      <link href="/css/theme-blue.css" rel="stylesheet">
    

    <script src="/js/jquery-2.x.min.js"></script>

    <style type="text/css">
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
        :not(pre) > code + span.copy-to-clipboard {
            display: none;
        }
      
    </style>
    <style type="text/css">
    h1 {
        text-align: left;
        border-bottom: 4px solid #F0F2F4;
    }
    #chapter h1 {
        text-align: center !important;
    }
    #chapter p {
        text-align: left !important;
    }
    section#shortcuts h3 {
        display: none;
    }
</style>

  </head>
  <body class="" data-url="/reference/jsonnet-glob-importer/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="http://qbec.io">

<img width="50%" src="/images/qbec-logo-white.svg">

</a>

    </div>
    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          


 
  
    
    <li data-nav-id="/getting-started/" title="Getting started" class="dd-item 
        
        
        
        ">
      <a href="/getting-started/">
          Getting started
          
      </a>
      
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/userguide/" title="User guide" class="dd-item 
        
        
        
        ">
      <a href="/userguide/">
          User guide
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/userguide/tour/" title="A quick tour of qbec" class="dd-item ">
        <a href="/userguide/tour/">
        A quick tour of qbec
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/userguide/model/" title="Core concepts" class="dd-item ">
        <a href="/userguide/model/">
        Core concepts
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/userguide/usage/" title="Using qbec" class="dd-item 
        
        
        
        ">
      <a href="/userguide/usage/">
          Using qbec
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/userguide/usage/basic/" title="Folders, files, parameters" class="dd-item ">
        <a href="/userguide/usage/basic/">
        Folders, files, parameters
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/userguide/usage/authoring/" title="Create components" class="dd-item ">
        <a href="/userguide/usage/authoring/">
        Create components
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/userguide/usage/common-metadata/" title="Common object metadata" class="dd-item ">
        <a href="/userguide/usage/common-metadata/">
        Common object metadata
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/userguide/usage/runtime-params/" title="Runtime parameters" class="dd-item ">
        <a href="/userguide/usage/runtime-params/">
        Runtime parameters
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/userguide/usage/branches-and-ci/" title="Branch builds and CI" class="dd-item ">
        <a href="/userguide/usage/branches-and-ci/">
        Branch builds and CI
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/userguide/usage/directives/" title="Controlling qbec behavior" class="dd-item ">
        <a href="/userguide/usage/directives/">
        Controlling qbec behavior
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/userguide/usage/commands/" title="Running qbec commands" class="dd-item ">
        <a href="/userguide/usage/commands/">
        Running qbec commands
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/userguide/usage/tips-and-tricks/" title="Tips and tricks" class="dd-item ">
        <a href="/userguide/usage/tips-and-tricks/">
        Tips and tricks
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/reference/" title="Reference" class="dd-item 
        parent
        
        
        ">
      <a href="/reference/">
          Reference
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/reference/qbec-yaml/" title="Application YAML" class="dd-item ">
        <a href="/reference/qbec-yaml/">
        Application YAML
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/reference/directives/" title="Qbec directives" class="dd-item ">
        <a href="/reference/directives/">
        Qbec directives
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/reference/jsonnet-vars/" title="Standard jsonnet variables" class="dd-item ">
        <a href="/reference/jsonnet-vars/">
        Standard jsonnet variables
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/reference/gen-metadata/" title="Metadata for K8s objects" class="dd-item ">
        <a href="/reference/gen-metadata/">
        Metadata for K8s objects
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/reference/jsonnet-native-funcs/" title="Jsonnet native functions" class="dd-item ">
        <a href="/reference/jsonnet-native-funcs/">
        Jsonnet native functions
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/reference/jsonnet-glob-importer/" title="Jsonnet glob importer" class="dd-item active">
        <a href="/reference/jsonnet-glob-importer/">
        Jsonnet glob importer
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/reference/jsonnet-external-data/" title="Jsonnet data importer" class="dd-item ">
        <a href="/reference/jsonnet-external-data/">
        Jsonnet data importer
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/reference/component-evaluation/" title="Component evaluation" class="dd-item ">
        <a href="/reference/component-evaluation/">
        Component evaluation
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/reference/diffs-and-patches/" title="Diffs and patches" class="dd-item ">
        <a href="/reference/diffs-and-patches/">
        Diffs and patches
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/reference/garbage-collection/" title="Garbage collection" class="dd-item ">
        <a href="/reference/garbage-collection/">
        Garbage collection
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/comparison-with-other-tools/" title="Comparison with other tools" class="dd-item 
        
        
        
        ">
      <a href="/comparison-with-other-tools/">
          Comparison with other tools
          
      </a>
      
              
    </li>
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li> 
                  <a class="padding" href="https://github.com/splunk/qbec"><i class='fab fa-github'></i> Github repo</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="footer">
      
    </section>
  </div>
</nav>





        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                  
                  
                  
                  <div id="top-github-link">
                    <a class="github-link" title='Edit this page' href="https://github.com/splunk/qbec/edit/master/site/content/reference/jsonnet-glob-importer.md" target="blank">
                      <i class="fas fa-code-branch"></i>
                      <span id="top-github-link-text">Edit this page</span>
                    </a>
                  </div>
                  
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/'>Home</a> > <a href='/reference/'>Reference</a> > Jsonnet glob importer
          
         
          
         
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#notes">Notes</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            

        
        <div id="body-inner">
          
            <h1>Jsonnet glob importer</h1>
          

        




<p>In many situations it is useful to be able to import a bag of files as an object. For instance, it is convenient to
load all environment configuration files present with a single invocation to <code>import</code> to pick up all files found without
having to name them individually.</p>

<p>For this purpose, qbec supplies a glob importer for importing a bag of  files using a glob pattern.
It supports two variants, one for importing the files that match the glob as code
and another for importing the files as a string (suitable, for example, for YAML files).</p>

<p>The basic syntax is:</p>

<pre><code>import 'glob-import:subdir/*.libsonnet' // imports all libsonnet files from the subdirectory
</code></pre>

<p>and</p>

<pre><code>import 'glob-importstr:*.yaml' // imports all YAML files in the current directory as strings
</code></pre>

<p>Let&rsquo;s say that in the first example you had files <code>a.libsonnet</code>, <code>b.libsonnet</code> and <code>c.libsonnet</code> in <code>subdir/</code>.
This would result in the following code being evaluated by jsonnet.</p>

<pre><code>{
   'subdir/a.libsonnet': import 'subdir/a.libsonnet',
   'subdir/b.libsonnet': import 'subdir/b.libsonnet',
   'subdir/c.libsonnet': import 'subdir/c.libsonnet',
}
</code></pre>

<p>In the second example if you had <code>a.yaml</code>, <code>b.yaml</code> and <code>c.yaml</code> in the current directory, the following code
would be evaluated:</p>

<pre><code>{
   'a.yaml': importstr 'a.yaml',
   'b.yaml': importstr 'b.yaml',
   'c.yaml': importstr 'c.yaml',
}
</code></pre>

<p>In both cases, the keys are paths to files relative to the directory where the <code>import</code> was invoked, and the objects
are the objects as returned by the jsonnet <code>import</code> and <code>importstr</code> directives respectively.</p>

<h3 id="notes">Notes</h3>

<ul>
<li>Globs are resolved using Go semantics. It is <strong>not</strong> an error for the pattern to not match any files. In that case,
an empty object is returned. If you want to treat this case as an error, you can do so in the jsonnet code after the
import is done.</li>
<li>Library paths are not considered by this importer. That&rsquo;s because it is ambiguous as to what <code>*.libsonnet</code> means
when there are libsonnet files in the current directory as well as in the library paths.</li>
<li>The object keys that are returned typically have to be post-processed in jsonnet to make them usable (e.g. stripping
directory paths, removing extensions etc.).
See the <a href="https://github.com/splunk/qbec/blob/master/examples/test-app/lib/globutil.libsonnet">globutil.libsonnet</a>
file in the qbec source tree for ideas.</li>
</ul>


<footer class=" footline" >
	
</footer>


        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="/reference/jsonnet-native-funcs/" title="Jsonnet native functions"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/reference/jsonnet-external-data/" title="Jsonnet data importer" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js"></script>
    <script src="/js/perfect-scrollbar.min.js"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js"></script>
    <script src="/js/jquery.sticky.js"></script>
    <script src="/js/featherlight.min.js"></script>
    <script src="/js/html5shiv-printshiv.min.js"></script>
    <script src="/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom.71422.js"></script>
    <script src="/js/learn.js"></script>
    <script src="/js/hugo-learn.js"></script>

    <link href="/mermaid/mermaid.css" type="text/css" rel="stylesheet" />
    <script src="/mermaid/mermaid.js"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    

  </body>
</html>

